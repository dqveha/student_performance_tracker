<%
calendar = []
dibels = []
accuracy = []
i = 0
@progresses.each { |x|
  dibels.push(x.dibels)
  accuracy.push(x.accuracy)
  calendar.push(x.date.to_s)
  i= 1
}
%>
<canvas id="myChart" width="960" height="200"></canvas>
<script>
  const myString = '<%=raw calendar%>'
  const noBracket1 = myString.replace(/^./g, '')
  const noBracket2 = noBracket1.replace(/.$/g, '')
  const noQuotes = noBracket2.replace(/"/g, '')
  const calendarJsArray = noQuotes.split(", ")
  
  // var ctx = document.getElementById('myChart');
  // var myChart = new Chart(ctx, {
  //   type: 'line',
  //   data: {
  //     labels: calendarJsArray,
  //     datasets: [{
  //       label: 'Dibels',
  //       yAxisID: 'A',
  //       data: <%=dibels%>,
  //       fill:false,
  //       borderColor:"#308af3",
  //       pointBackgroundColor: "#308af3",
  //       pointBorderWidth: 2,
  //       pointHoverBackgroundColor: "#fff",
  //       pointHoverBorderWidth: 2,
  //       lineTension:0.05,
  //     }, {
  //       label: 'Accuracy',
  //       yAxisID: 'B',
  //       data: <%=accuracy%>,
  //       fill:false,
  //       borderColor:"#48ba16",
  //       pointBackgroundColor: "#48ba16",
  //       pointBorderWidth: 2,
  //       pointHoverBackgroundColor: "#fff",
  //       pointHoverBorderWidth: 2,
  //       lineTension:0.05
  //     }]
  //   },
  //   options: {
  //     plugins: {
  //       title: {
  //         display: true,
  //         text: 'DIBELS and Accuracy'
  //       },
  //     },
  //     scales: {
  //       yAxes: [{
  //         id: 'A',
  //         type: 'linear',
  //         position: 'left',
  //         title: {
  //           display: true,
  //           text: "DIBELS Correct WPM"
  //         },
  //       }, {
  //         id: 'B',
  //         type: 'linear',
  //         position: 'right',
  //         ticks: {
  //           max: 1,
  //           min: 0
  //         },
  //         title: {
  //           display: true,
  //           text: "DIBELS Correct WPM"
  //         }
  //       }]
  //     }
  //   }
  // });
  
  var ctx = document.getElementById('myChart');
  var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: calendarJsArray,
      datasets: [{
        label: 'Dibels',
        yAxisID: 'A',
        data: <%=dibels%>,
        fill:false,
        borderColor:"#308af3",
        pointBackgroundColor: "#308af3",
        pointBorderWidth: 2,
        pointHoverBackgroundColor: "#fff",
        pointHoverBorderWidth: 2,
        lineTension:0.05,
      }, {
        label: 'Accuracy',
        yAxisID: 'B',
        data: <%=accuracy%>,
        fill:false,
        borderColor:"#48ba16",
        pointBackgroundColor: "#48ba16",
        pointBorderWidth: 2,
        pointHoverBackgroundColor: "#fff",
        pointHoverBorderWidth: 2,
        lineTension:0.05
      }]
    },
    options: {
      plugins: {
        title: {
          display: true,
          text: 'DIBELS and Accuracy'
        },
      },
      scales: {
        A: {
          type: 'linear',
          position: 'left',
          title: {
            display: true,
            text: "DIBELS Correct WPM"
          },
        },
        B: {
          type: 'linear',
          position: 'right',
          ticks: {
            max: 1,
            min: 0
          },
          title: {
            display: true,
            text: "Accuracy"
          }
        },
        x: {
          title: {
            display: true,
            text: 'Date'
          }
        }
      }
    }
  });
</script>
<br>
<br>
<br>
<br>
-------- <br>
<br>
<br>
<br>
<% pie_chart Student.group(:teacher_id).count %>
<br>
<br>
<br>
<br>
-------- <br>
<br>
<br>
<br>
<% line_chart @progresses.pluck(:date, :dibels), xtitle: "Date", ytitle: "DIBELS Correct WPM", curve: false%>
<br>
<br>
<br>
<br>
-------- <br>
<br>
<br>
<br>
<% line_chart [
{:name=>'DIBELS', :data=>@progresses.pluck(:date, :dibels), :yAxisID=>'leftAxis'},
{:name=> 'Accuracy', :data=>@progresses.pluck(:date, :accuracy), :yAxisID=> 'rightAxis'}
], library: {
scales: {
y: {
type: 'linear',
position: 'right',
display: true,
id: 'leftAxis'
},
y1: {
type: 'linear',
position: 'left',
display: true,
id: 'rightAxis'
}
}
}, xtitle: "Date", curve: false %>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
-------- <br>
<br>
<br>
<br>
